# 云算力资源租用系统设计方案
## 系统概述
云算力资源租用系统是一个专注于管理和分配计算资源的平台，允许学生和教师租用云计算资源进行学习和研究。系统将应用C++的面向对象特性，包括类的构造、聚合、继承、派生以及多态技术，同时保持适当的复杂度，适合C++大作业的要求。

## 系统功能模块
### 1. 用户模块
- 用户登录（学生、教师、管理员）
- 用户注册（仅学生和教师）
- 个人信息管理
- 密码修改
### 2. 云算力资源模块
- 云算力资源查询
- 云算力资源租用
- 查看个人租用记录
- 取消租用申请
### 3. 管理员模块
- 云算力资源管理（添加、修改、删除）
- 用户管理（查看、添加、修改）
- 租用审核（审核用户的租用申请）
- 查看所有租用记录
- 收费标准设置
### 4. 支付模块
- 云算力资源计费
- 账单生成
- 余额管理

## 数据结构设计

### 1. 用户类层次结构
- 基类：User（用户基类，包含ID、姓名、密码等共有属性）
- 派生类：Student（学生类，增加学号、班级等属性）
- 派生类：Teacher（教师类，增加工号、部门等属性）
- 派生类：Administrator（管理员类，增加管理权限等属性）

### 2. 云算力资源类
- CloudResource（资源基类，包含资源ID、名称、类型、价格等属性）
- 派生类：CPUResource（CPU资源，增加核心数、频率等属性）
- 派生类：GPUResource（GPU资源，增加型号、显存等属性）
- 派生类：StorageResource（存储资源，增加容量、读写速度等属性）

### 3. 租用记录类
- Rental（租用记录类，包含租用ID、用户ID、资源ID、开始时间、结束时间、费用等属性）

## 云算力资源租用规则
### 1. 资源分类与定价
- CPU资源 ：按核心数和时间计费
- GPU资源 ：按GPU型号和时间计费
- 存储资源 ：按容量和时间计费
### 2. 用户权限与优先级
- 教师用户 ：拥有更高的资源配额和优先级
- 学生用户 ：拥有基础资源配额
### 3. 计费规则
- 按时间和资源类型计费：当用户归还资源时，系统会计算使用的资源类型和使用时间进行计费
- 最小计费单位：不足1小时按1小时计算
- 最长租用限制：单次租用最长不超过15天（360小时），超时将会释放实例
- 分时段计费：可设置高峰期和低峰期不同价格
- 超时费用：超过预定时间的部分可能会有额外费率
- 提前归还：按实际使用时长计费，多余预付费用返还到用户账户
- 资源组合优惠：同时租用多种资源可享受组合优惠

### 4. 资源分配策略
- 先到先得 ：在资源充足的情况下按申请顺序分配
- 优先级分配 ：资源不足时按用户类型优先级分配

### 5. 租用状态流程
1. 申请中：用户提交租用申请
2. 审核通过/拒绝：管理员审核申请
3. 使用中：用户开始使用资源
4. 已完成：用户归还资源，系统计费
5. 已取消：用户取消申请或管理员强制终止

## 文件结构设计
系统将使用文件来持久化存储数据：

1. users.dat - 存储用户信息
2. resources.dat - 存储云算力资源信息
3. rentals.dat - 存储租用记录
4. logs.dat - 存储系统操作日志

## 系统流程
1. 系统启动，加载所有数据
2. 显示登录/注册界面
3. 用户登录后，根据角色显示不同的功能菜单
4. 用户进行相应操作
5. 系统退出前保存所有数据

## 异常处理机制
1. 用户余额不足：提示充值，暂停申请处理
2. 资源不足：进入等待队列或推荐替代资源
3. 租用超时：自动释放资源，计算费用，可能限制用户后续使用
4. 系统故障：记录日志，尝试恢复，必要时通知管理员

## 安全机制
1. 密码输入不显示
2. 操作日志：记录关键操作，便于追踪和审计
3. 权限控制：严格控制不同角色的操作权限
4. 数据备份：定期备份系统数据，防止数据丢失


## 技术亮点
1. 面向对象设计 ：使用继承和多态实现用户角色的差异化
2. 文件持久化 ：使用文件存储系统数据
3. 权限管理 ：不同角色拥有不同的操作权限
4. 租用状态流转 ：租用从申请到审核到使用的完整流程

## 实现技术
1. 开发语言：C++
2. 开发环境：Visual Studio 2022
3. 文件操作：使用C++标准库的文件流
4. 用户界面：控制台界面，使用字符菜单
5. 数据存储：使用二进制文件存储系统数据

## 系统测试计划
1. 单元测试：测试各个类和方法的功能
2. 集成测试：测试模块间的交互
3. 系统测试：测试整个系统的功能和性能
4. 用户测试：邀请实际用户测试系统并收集反馈


