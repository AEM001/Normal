# Windows VSCode 编译运行指南

## 环境准备

1. 安装 Visual Studio Code
   - 从 [VSCode官网](https://code.visualstudio.com/) 下载并安装最新版本

2. 安装 C++ 编译器
   - 推荐安装 MinGW-w64
   - 下载地址：[MinGW-w64](https://sourceforge.net/projects/mingw-w64/files/)
   - 安装时选择 x86_64 架构和 posix 线程模型
   - 将 MinGW 的 bin 目录添加到系统环境变量 PATH 中

3. 安装 VSCode C++ 扩展
   - 在 VSCode 中打开扩展面板 (Ctrl+Shift+X)
   - 搜索并安装 "C/C++" 扩展

## 项目设置

1. 解压项目文件
   - 将收到的项目压缩包解压到一个不含中文和空格的路径下
   - 例如：`C:\Projects\CloudResourceRental`

2. 在 VSCode 中打开项目
   - 打开 VSCode
   - 选择 "文件 > 打开文件夹"
   - 选择解压后的项目文件夹

3. 创建 data 目录
   - 在项目根目录下创建 `data` 文件夹（如果不存在）

## 配置 VSCode

1. 创建 tasks.json 文件
   - 按 Ctrl+Shift+P 打开命令面板
   - 输入 "Tasks: Configure Default Build Task"
   - 选择 "Create tasks.json file from template"
   - 选择 "Others"
   - 将以下内容替换到 tasks.json 文件中：

```json
{
    "version": "2.0.0",
    "tasks": [
        {
            "label": "build",
            "type": "shell",
            "command": "g++",
            "args": [
                "-g",
                "main_fixed.cpp",
                "DataManager_fixed.cpp",
                "Notification_fixed.cpp",
                "-o",
                "cloud_resource_rental.exe",
                "-std=c++11"
            ],
            "group": {
                "kind": "build",
                "isDefault": true
            },
            "problemMatcher": [
                "$gcc"
            ]
        }
    ]
}
```

2. 创建 launch.json 文件
   - 按 Ctrl+Shift+P 打开命令面板
   - 输入 "Debug: Open launch.json"
   - 选择 "C++ (GDB/LLDB)"
   - 选择 "g++.exe - 生成和调试活动文件"
   - 将以下内容替换到 launch.json 文件中：

```json
{
    "version": "0.2.0",
    "configurations": [
        {
            "name": "g++.exe - 生成和调试活动文件",
            "type": "cppdbg",
            "request": "launch",
            "program": "${workspaceFolder}/cloud_resource_rental.exe",
            "args": [],
            "stopAtEntry": false,
            "cwd": "${workspaceFolder}",
            "environment": [],
            "externalConsole": true,
            "MIMode": "gdb",
            "miDebuggerPath": "gdb.exe",
            "setupCommands": [
                {
                    "description": "为 gdb 启用整齐打印",
                    "text": "-enable-pretty-printing",
                    "ignoreFailures": true
                }
            ],
            "preLaunchTask": "build"
        }
    ]
}
```

## 编译和运行

1. 编译项目
   - 按 Ctrl+Shift+B 执行默认构建任务
   - 等待编译完成，查看终端输出确认没有错误

2. 运行项目
   - 方法一：在终端中直接运行生成的可执行文件
     - 打开终端 (Ctrl+`)
     - 输入 `.\cloud_resource_rental.exe`
   - 方法二：使用调试模式运行
     - 按 F5 启动调试
     - 程序将在新的控制台窗口中运行

## 常见问题解决

1. 编译错误："找不到 conio.h"
   - 这是因为 conio.h 是 Windows 特有的头文件
   - 确保使用 MinGW 而不是其他编译器

2. 运行时找不到数据文件
   - 确保在项目根目录下创建了 `data` 文件夹
   - 首次运行时系统会自动创建默认数据

3. 控制台显示乱码
   - 在 VSCode 设置中将终端编码设置为 GBK 或 GB2312
   - 或者在系统控制台属性中将编码改为"使用旧版控制台"

4. 密码输入不显示星号
   - 这是正常现象，在某些 Windows 控制台中 _getch() 函数可能无法正确显示星号
   - 密码仍然会被正确读取，不影响功能使用

## 系统使用说明

1. 默认管理员账户
   - 用户名：admin
   - 密码：admin123

2. 默认教师账户
   - 用户名：teacher1 或 teacher2
   - 密码：teacher123

3. 默认学生账户
   - 用户名：student1 或 student2
   - 密码：student123

4. 系统功能
   - 用户注册和登录
   - 资源浏览和租用
   - 账单管理和支付
   - 通知系统
   - 管理员功能（资源管理、用户管理、租赁审核等）

## 项目文件说明

- `main_fixed.cpp`: 主程序入口和界面交互
- `User_fixed.hpp`: 用户相关类和功能
- `Resource_fixed.hpp`: 资源相关类和功能
- `Rental_fixed.hpp`: 租赁相关类和功能
- `Billing_fixed.hpp`: 账单和计费相关类和功能
- `Notification_fixed.hpp/cpp`: 通知相关类和功能
- `DataManager_fixed.hpp/cpp`: 数据管理和持久化相关类和功能
